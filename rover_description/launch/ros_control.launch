<launch>
  <!-- Load robot description if not already loaded -->
  <arg name="model" default="$(find rover_description)/urdf/rover_articulated.xacro"/>

  <param name="rover_description" command="$(find xacro)/xacro $(arg model)"/>

  <!-- Joint state publisher is handled by robot_state_publisher or separate node -->

  <!-- Load controller configurations -->
  <rosparam file="$(find rover_description)/config/controllers.yaml" command="load"/>

  <!-- Spawn controllers -->
  <node name="controller_spawner" pkg="controller_manager" type="spawner"
        args="articulated_rover/joint_state_controller
              articulated_rover/left_front_wheel_velocity_controller
              articulated_rover/right_front_wheel_velocity_controller
              articulated_rover/left_middle_wheel_velocity_controller
              articulated_rover/right_middle_wheel_velocity_controller
              articulated_rover/left_rear_wheel_velocity_controller
              articulated_rover/right_rear_wheel_velocity_controller
              articulated_rover/head_yaw_position_controller
              articulated_rover/head_pitch_position_controller
              articulated_rover/arm_shoulder_yaw_position_controller
              articulated_rover/arm_shoulder_pitch_position_controller
              articulated_rover/arm_elbow_pitch_position_controller
              articulated_rover/arm_wrist_pitch_position_controller
              articulated_rover/arm_wrist_yaw_position_controller
              articulated_rover/arm_tool_roll_position_controller"
        output="screen"/>
</launch>